<div class="inner-content" nz-row nzType="flex" nzJustify="center">
    
        <h4 nz-title>Atualizar informacoes</h4>
    
        <form
            *ngIf="!updateSuccess" 
            nz-form [formGroup]="profileForm" (ngSubmit)="submitUpdate()">
            <nz-form-item>
                <nz-form-control>
                    <nz-input-group nzPrefixIcon="user">
                        <input type="text" nz-input formControlName="userName" placeholder="Nome">
                    </nz-input-group>
                </nz-form-control>
            </nz-form-item>
            <nz-form-item>
                <nz-form-control>
                    <nz-input-group nzPrefixIcon="mail">
                        <input type="email" nz-input formControlName="userEmail" placeholder="Email">
                    </nz-input-group>
                </nz-form-control>
            </nz-form-item>
            <nz-form-item>
                <nz-form-control>
                    <button nz-button [disabled]="updateSuccess" [nzType]="'primary'">Atualizar</button>
                    <button 
                    nz-button 
                    nzType="danger" 
                    nz-popover
                    nzPopoverTitle="Deseja exluir o usuário? Essa ação não pode ser desfeita. Digite a senha para excluir o usuário"
                    [nzPopoverContent]="deleteButtonTemplate"
                    nzPopoverTrigger="click">
                        Excluir
                    </button>
                    <ng-template #deleteButtonTemplate>
                        <form *ngIf="!deleteUserSuccess" nz-form [formGroup]="deleteForm"  (ngSubmit)="deleteUser()">
                            <nz-form-item>
                                <nz-form-control>
                                    <nz-input-group>
                                        <input 
                                        nz-input 
                                        type="password" 
                                        formControlName="password" 
                                        placeholder="Password">
                                    </nz-input-group>
                                </nz-form-control>
                            </nz-form-item>
                            <nz-form-item>
                                <nz-form-control>
                                    <nz-input-group>
                                        <button 
                                        nzType="danger"
                                        nz-button [disabled]="!deleteForm.valid">Deletar</button>
                                    </nz-input-group>
                                </nz-form-control>
                            </nz-form-item>
                        </form>
                        <nz-alert 
                        *ngIf="deleteUserSuccess"
                        nzType="success"
                        nzMessage="Usuário excluído com sucesso."
                        nzDescription="Essa operação não pode ser desfeita. Você será redirecionado em instantens"
                        nzShowIcon></nz-alert>
                    </ng-template>
                </nz-form-control>
                <a nz-button
                    [style.visibility]="updateSuccess ? 'visible' : 'hidden'" 
                    [nzType]="'default'"
                    (click)="newUpdate()"
                    >Nova Atualização</a>
            </nz-form-item> 
        </form>

        <nz-alert 
        *ngIf="updateSuccess"
        nzType="success"
        nzMessage="Password atualizado com sucesso"
        nzShowIcon>
        </nz-alert>
    
</div>
<div class="inner-content" nz-row nzType="flex" nzJustify="center">
    <h4>Atualizar Senha</h4>
    <form *ngIf="!passworUpdateSuccess" nz-form [formGroup]="userPassword" (ngSubmit)="submitNewPassword()">
        <nz-form-item>
            <nz-form-control>
                <nz-input-group nzPrefixIcon="lock">
                    <input type="password" nz-input formControlName="password" placeholder="Senha">
                </nz-input-group>
            </nz-form-control>
        </nz-form-item>
        <nz-form-item>
            <nz-form-control>
                <nz-input-group nzPrefixIcon="lock">
                    <input type="password" nz-input formControlName="repeat" placeholder="Confirmar a Senha">
                </nz-input-group>
            </nz-form-control>
        </nz-form-item>
        <nz-form-item>
            <nz-form-control>
                <button nz-button [disabled]="!userPassword.valid" [nzType]="'primary'">Atualizar Password</button>
            </nz-form-control>
        </nz-form-item>
    </form>
    <nz-alert 
    *ngIf="passworUpdateSuccess"
      nzType="success"
      nzMessage="Password atualizado com sucesso"
      nzShowIcon>
    </nz-alert>
</div>